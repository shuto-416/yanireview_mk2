{"version":3,"sources":["../../src/use-tooltip.ts"],"names":["useDisclosure","useEventListener","useId","popperCSSVars","usePopper","mergeRefs","callAllHandlers","px","React","useTooltip","props","openDelay","closeDelay","closeOnClick","closeOnMouseDown","onOpen","onOpenProp","onClose","onCloseProp","placement","id","isOpen","isOpenProp","defaultIsOpen","arrowSize","arrowShadowColor","arrowPadding","modifiers","isDisabled","gutter","offset","direction","htmlProps","referenceRef","getPopperProps","getArrowInnerProps","getArrowProps","enabled","tooltipId","ref","useRef","enterTimeout","exitTimeout","openWithDelay","useCallback","current","window","setTimeout","closeWithDelay","clearTimeout","onClick","onMouseDown","onKeyDown","event","key","useEffect","getTriggerProps","_ref","triggerProps","onMouseEnter","onFocus","onBlur","undefined","getTooltipPositionerProps","forwardedRef","style","var","getTooltipProps","tooltipProps","role","position","transformOrigin","varRef","show","hide"],"mappings":"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","sourcesContent":["import { useDisclosure, useEventListener, useId } from \"@chakra-ui/hooks\"\nimport { popperCSSVars, usePopper, UsePopperProps } from \"@chakra-ui/popper\"\nimport { mergeRefs, PropGetter } from \"@chakra-ui/react-utils\"\nimport { callAllHandlers, px } from \"@chakra-ui/utils\"\nimport * as React from \"react\"\n\nexport interface UseTooltipProps\n  extends Pick<\n    UsePopperProps,\n    | \"modifiers\"\n    | \"gutter\"\n    | \"offset\"\n    | \"arrowPadding\"\n    | \"direction\"\n    | \"placement\"\n  > {\n  /**\n   * Delay (in ms) before showing the tooltip\n   * @default 0ms\n   */\n  openDelay?: number\n  /**\n   * Delay (in ms) before hiding the tooltip\n   * @default 0ms\n   */\n  closeDelay?: number\n  /**\n   * If `true`, the tooltip will hide on click\n   */\n  closeOnClick?: boolean\n  /**\n   * If `true`, the tooltip will hide while the mouse\n   * is down\n   */\n  closeOnMouseDown?: boolean\n  /**\n   * Callback to run when the tooltip shows\n   */\n  onOpen?(): void\n  /**\n   * Callback to run when the tooltip hides\n   */\n  onClose?(): void\n  /**\n   * Custom `id` to use in place of `uuid`\n   */\n  id?: string\n  /**\n   * If `true`, the tooltip will be shown (in controlled mode)\n   */\n  isOpen?: boolean\n  /**\n   * If `true`, the tooltip will be initially shown\n   */\n  defaultIsOpen?: boolean\n  isDisabled?: boolean\n  arrowSize?: number\n  arrowShadowColor?: string\n}\n\nexport function useTooltip(props: UseTooltipProps = {}) {\n  const {\n    openDelay = 0,\n    closeDelay = 0,\n    closeOnClick = true,\n    closeOnMouseDown,\n    onOpen: onOpenProp,\n    onClose: onCloseProp,\n    placement,\n    id,\n    isOpen: isOpenProp,\n    defaultIsOpen,\n    arrowSize = 10,\n    arrowShadowColor,\n    arrowPadding,\n    modifiers,\n    isDisabled,\n    gutter,\n    offset,\n    direction,\n    ...htmlProps\n  } = props\n\n  const { isOpen, onOpen, onClose } = useDisclosure({\n    isOpen: isOpenProp,\n    defaultIsOpen,\n    onOpen: onOpenProp,\n    onClose: onCloseProp,\n  })\n\n  const {\n    referenceRef,\n    getPopperProps,\n    getArrowInnerProps,\n    getArrowProps,\n  } = usePopper({\n    enabled: isOpen,\n    placement,\n    arrowPadding,\n    modifiers,\n    gutter,\n    offset,\n    direction,\n  })\n\n  const tooltipId = useId(id, \"tooltip\")\n\n  const ref = React.useRef<any>(null)\n\n  const enterTimeout = React.useRef<number>()\n  const exitTimeout = React.useRef<number>()\n\n  const openWithDelay = React.useCallback(() => {\n    if (!isDisabled) {\n      enterTimeout.current = window.setTimeout(onOpen, openDelay)\n    }\n  }, [isDisabled, onOpen, openDelay])\n\n  const closeWithDelay = React.useCallback(() => {\n    if (enterTimeout.current) {\n      clearTimeout(enterTimeout.current)\n    }\n    exitTimeout.current = window.setTimeout(onClose, closeDelay)\n  }, [closeDelay, onClose])\n\n  const onClick = React.useCallback(() => {\n    if (closeOnClick) {\n      closeWithDelay()\n    }\n  }, [closeOnClick, closeWithDelay])\n\n  const onMouseDown = React.useCallback(() => {\n    if (closeOnMouseDown) {\n      closeWithDelay()\n    }\n  }, [closeOnMouseDown, closeWithDelay])\n\n  const onKeyDown = (event: KeyboardEvent) => {\n    if (isOpen && event.key === \"Escape\") {\n      closeWithDelay()\n    }\n  }\n\n  useEventListener(\"keydown\", onKeyDown)\n\n  React.useEffect(\n    () => () => {\n      clearTimeout(enterTimeout.current)\n      clearTimeout(exitTimeout.current)\n    },\n    [],\n  )\n\n  /**\n   * This allows for catching mouseleave events when the tooltip\n   * trigger is disabled. There's currently a known issue in\n   * React regarding the onMouseLeave polyfill.\n   * @see https://github.com/facebook/react/issues/11972\n   */\n  useEventListener(\"mouseleave\", closeWithDelay, () => ref.current)\n\n  const getTriggerProps: PropGetter = React.useCallback(\n    (props = {}, _ref = null) => {\n      const triggerProps = {\n        ...props,\n        ref: mergeRefs(ref, _ref, referenceRef),\n        onMouseEnter: callAllHandlers(props.onMouseEnter, openWithDelay),\n        onClick: callAllHandlers(props.onClick, onClick),\n        onMouseDown: callAllHandlers(props.onMouseDown, onMouseDown),\n        onFocus: callAllHandlers(props.onFocus, openWithDelay),\n        onBlur: callAllHandlers(props.onBlur, closeWithDelay),\n        \"aria-describedby\": isOpen ? tooltipId : undefined,\n      }\n\n      return triggerProps\n    },\n    [\n      openWithDelay,\n      closeWithDelay,\n      onMouseDown,\n      isOpen,\n      tooltipId,\n      onClick,\n      referenceRef,\n    ],\n  )\n\n  const getTooltipPositionerProps: PropGetter = React.useCallback(\n    (props = {}, forwardedRef = null) =>\n      getPopperProps(\n        {\n          ...props,\n          style: {\n            ...props.style,\n            [popperCSSVars.arrowSize.var]: arrowSize\n              ? px(arrowSize)\n              : undefined,\n            [popperCSSVars.arrowShadowColor.var]: arrowShadowColor,\n          },\n        },\n        forwardedRef,\n      ),\n    [getPopperProps, arrowSize, arrowShadowColor],\n  )\n\n  const getTooltipProps = React.useCallback(\n    (props = {}, _ref = null) => {\n      const tooltipProps = {\n        ref: _ref,\n        ...htmlProps,\n        ...props,\n        id: tooltipId,\n        role: \"tooltip\",\n        style: {\n          ...props.style,\n          position: \"relative\",\n          transformOrigin: popperCSSVars.transformOrigin.varRef,\n        },\n      }\n\n      return tooltipProps\n    },\n    [htmlProps, tooltipId],\n  )\n\n  return {\n    isOpen,\n    show: openWithDelay,\n    hide: closeWithDelay,\n    getTriggerProps,\n    getTooltipProps,\n    getTooltipPositionerProps,\n    getArrowProps,\n    getArrowInnerProps,\n  }\n}\n\nexport type UseTooltipReturn = ReturnType<typeof useTooltip>\n"],"file":"use-tooltip.js"}